# Реализация личного кабинета

## Созданные/измененные файлы

### Конфигурация
- `tailwind.config.js` - конфигурация Tailwind CSS
- `postcss.config.js` - конфигурация PostCSS
- `app/globals.css` - добавлены директивы Tailwind

### Server Actions
- `app/actions/prompts.ts` - CRUD операции для промтов:
  - `createPrompt` - создание нового промта
  - `updatePrompt` - обновление промта (с проверкой прав)
  - `deletePrompt` - удаление промта (с проверкой прав)
  - `togglePublic` - переключение публичности
  - `toggleFavorite` - переключение избранного

### UI Компоненты
- `components/ui/button.tsx` - компонент кнопки
- `components/ui/input.tsx` - компонент поля ввода
- `components/ui/textarea.tsx` - компонент текстовой области
- `components/ui/dialog.tsx` - компонент диалога
- `lib/utils.ts` - утилита для объединения классов

### Dashboard Компоненты
- `components/dashboard/DashboardSidebar.tsx` - боковая панель навигации
- `components/dashboard/PromptCard.tsx` - карточка промта с действиями
- `components/dashboard/PromptDialog.tsx` - диалог создания/редактирования
- `components/dashboard/PromptsList.tsx` - список промтов с поиском и пагинацией
- `components/dashboard/PublicPromptsList.tsx` - список публичных промтов

### Страницы
- `app/dashboard/layout.tsx` - layout для всех страниц dashboard с сайдбаром
- `app/dashboard/page.tsx` - "Мои советы" (основная страница)
- `app/dashboard/public/page.tsx` - "Публичные советы"
- `app/dashboard/favorites/page.tsx` - "Избранное"
- `app/dashboard/history/page.tsx` - "История" (заглушка)
- `app/dashboard/settings/page.tsx` - "Настройки" (заглушка)

## Переменные окружения

Убедитесь, что в `.env` файле есть:
```
DATABASE_URL="postgresql://..."
AUTH_SECRET="..."
GOOGLE_CLIENT_ID="..."
GOOGLE_CLIENT_SECRET="..."
```

## Миграция базы данных

Схема Prisma уже содержит модель Prompt с необходимыми полями:
- `id` - UUID
- `ownerId` - ID владельца
- `title` - заголовок
- `content` - содержание
- `isPublic` - публичность (boolean)
- `isFavorite` - избранное (boolean)
- `createdAt` - дата создания
- `updatedAt` - дата обновления

Если нужно применить миграции:
```bash
npm run db:migrate
```

## Как проверить функциональность

### 1. Создать промт
1. Откройте `/dashboard`
2. Нажмите кнопку "Новый промт"
3. Заполните форму:
   - Заголовок (обязательно)
   - Содержание (обязательно)
   - Чекбокс "Сделать публичным" (опционально)
4. Нажмите "Создать"
5. Промт должен появиться в списке

### 2. Редактировать промт
1. На странице "Мои советы" найдите нужный промт
2. Нажмите иконку карандаша (Pencil) на карточке
3. Измените данные в диалоге
4. Нажмите "Сохранить"
5. Изменения должны отобразиться

### 3. Удалить промт
1. На странице "Мои советы" найдите нужный промт
2. Нажмите иконку корзины (Trash2) на карточке
3. Подтвердите удаление
4. Промт должен исчезнуть из списка

### 4. Переключить публичность
1. На карточке промта нажмите иконку Globe (публичный) или Lock (приватный)
2. Иконка должна измениться
3. Промт должен появиться/исчезнуть на странице "Публичные советы"

### 5. Добавить в избранное
1. На любой карточке промта нажмите иконку звезды
2. Звезда должна стать желтой (заполненной)
3. Промт должен появиться на странице "Избранное"

### 6. Поиск
1. Введите текст в поле поиска
2. Список должен обновиться через 300ms (debounce)
3. Поиск работает по заголовку и содержанию

### 7. Пагинация
1. Если промтов больше 10, внизу появятся кнопки навигации
2. Нажмите "Вперед" или "Назад" для перехода между страницами

### 8. Публичные советы
1. Перейдите на `/dashboard/public`
2. Должны отображаться только промты с `isPublic = true`
3. Для чужих промтов доступны только действия: избранное
4. Для своих промтов доступны все действия: редактирование, удаление, публичность

## Особенности реализации

1. **Проверка прав**: Все операции изменения/удаления проверяют, что пользователь является владельцем промта
2. **Валидация**: Используется Zod для валидации входных данных
3. **Оптимистичные обновления**: Используется `useTransition` для плавных обновлений UI
4. **Debounce поиска**: Поиск обновляется через 300ms после остановки ввода
5. **Пагинация**: По 10 промтов на страницу
6. **Стили**: Tailwind CSS с мягкими цветами и скруглениями

## Примечания

- Страницы "История" и "Настройки" пока содержат заглушки
- Избранное (`isFavorite`) хранится на уровне промта, а не пользователя (согласно текущей схеме Prisma)
- Все маршруты `/dashboard/*` защищены middleware и требуют авторизации




